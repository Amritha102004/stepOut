<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Profile - StepOut</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- CSS Files -->
    <link rel="stylesheet" href="/css/user/header.css">
    <link rel="stylesheet" href="/css/user/footer.css">
    <link rel="stylesheet" href="/css/user/accountCommon.css">
    <link rel="stylesheet" href="/css/user/accountSidebar.css">
    <link rel="stylesheet" href="/css/user/editAccount.css">
</head>

<body>
    <!-- Header (from partial) -->
    <%- include('./partials/header') %>

        <!-- Main Content -->
        <div class="container main-container">
            <div class="account-layout">
                <!-- Sidebar -->
                <div class="account-sidebar-container">
                    <%- include('./partials/accountSidebar', { activePage: 'overview' }) %>
                </div>

                <!-- Content Area -->
                <div class="account-content-container">
                    <div class="content-area">
                        <!-- Account Settings Section -->
                        <div class="profile-section mb-5">
                            <h2 class="section-title">Account Settings</h2>

                            <div class="row">
                                <div class="col-md-8">
                                    <form id="profileForm" action="/account/editAccount" method="post">
                                        <div class="mb-3">
                                            <label for="fullName" class="form-label">Full name</label>
                                            <input type="text" class="form-control" id="fullName" name="fullName"
                                                value="<%=req.session.user.fullName%>" >
                                            <% if (errors && errors.fullName) { %>
                                                <p class="error ">
                                                    <%= errors.fullName %>
                                                </p>
                                                <% } %>
                                        </div>

                                        <div class="mb-3">
                                            <label for="email" class="form-label">Email</label>
                                            <input type="email" class="form-control" id="email" name="email"
                                                value="<%=req.session.user.email%>" >
                                            <% if (errors && errors.email) { %>
                                                <p class="error ">
                                                    <%= errors.email %>
                                                </p>
                                                <% } %>
                                        </div>

                                        <div class="mb-3">
                                            <label for="phoneNumber" class="form-label">Phone number</label>
                                            <input type="tel" class="form-control" id="phoneNumber" name="phoneNumber"
                                                value="<%=req.session.user.phoneNumber%>" >
                                            <% if (errors && errors.phoneNumber) { %>
                                                <p class="error ">
                                                    <%= errors.phoneNumber %>
                                                </p>
                                                <% } %>
                                        </div>

                                        <button type="submit" class="btn btn-primary">Save Changes</button>
                                    </form>
                                </div>

                                <div class="col-md-4">
                                    <div class="profile-image-container">
                                        <img src="/image/profile.png"
                                            id="profileImage" class="profile-image" alt="Profile Image">
                                        <button type="button" id="chooseImageBtn"
                                            class="btn btn-outline-secondary mt-3">Choose Image</button>
                                        <input type="file" id="profileImageInput" accept="image/*"
                                            style="display: none;">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Change Password Section -->
                        <div class="password-section">
                            <h2 class="section-title">Change Password</h2>

                            <form id="passwordForm" action="/account/changePassword" method="post" class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="currentPassword" class="form-label">Current Password</label>
                                    <div class="password-field">
                                        <input type="password" class="form-control" id="currentPassword" name="currentPassword">
                                        <button type="button" class="password-toggle">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <% if (errors && errors.currentPassword) { %>
                                                <p class="error ">
                                                    <%= errors.currentPassword %>
                                                </p>
                                                <% } %>
                                </div>

                                <div class="col-md-4 mb-3">
                                    <label for="newPassword" class="form-label">New Password</label>
                                    <div class="password-field">
                                        <input type="password" class="form-control" id="newPassword" name="newPassword">
                                        <button type="button" class="password-toggle">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <% if (errors && errors.newPassword) { %>
                                                <p class="error ">
                                                    <%= errors.newPassword %>
                                                </p>
                                                <% } %>
                                </div>

                                <div class="col-md-4 mb-3">
                                    <label for="confirmPassword" class="form-label">Confirm Password</label>
                                    <div class="password-field">
                                        <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" >
                                        <button type="button" class="password-toggle">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <% if (errors && errors.confirmPassword) { %>
                                                <p class="error ">
                                                    <%= errors.confirmPassword %>
                                                </p>
                                                <% } %>
                                </div>

                                <div class="col-12">
                                    <button type="submit" class="btn btn-primary">Change Password</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer (from partial) -->
        <%- include('./partials/footer') %>

            <!-- Bootstrap JS -->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
            <!-- Custom JS -->
            <script src="/js/user/common.js"></script>
            <script src="/js/user/accountSidebar.js"></script>
            <script src="/js/user/editAccount.js"></script>
</body>

</html>